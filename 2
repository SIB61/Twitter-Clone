import { dbConnect } from "@/core/utils/db";
import { getAllTweets } from "./get-all-tweets";

export async function getUserFeed(user){
  await dbConnect()
  let tweets = await getAllTweets();
  tweets = tweets.map(tweet=>{
    tweet.isLiked = tweet.likes.reduce((acc,cur)=> acc || cur.toString()===user.id.toString(),false)
    tweet.totalLikes = tweet.likes.length
    tweet.totalComments = tweet.comments.length
    console.log(tweet)
    return tweet
  })
  return tweets
}
